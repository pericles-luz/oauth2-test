{{define "discovery"}}
{{template "header" .}}

<!-- Breadcrumbs -->
<div class="breadcrumbs">
    <a href="/">Home</a> / <a href="/dashboard">Dashboard</a> / OIDC Discovery
</div>

<div class="page-header">
    <h2>
        <span class="tooltip">
            OIDC Discovery
            <span class="tooltiptext">Documento de descoberta OpenID Connect contendo todos os endpoints e configurações do servidor</span>
        </span>
    </h2>
    <p>Documento de descoberta OpenID Connect (.well-known/openid-configuration)</p>
    <a href="/dashboard" class="btn btn-secondary">← Voltar para Dashboard</a>
</div>

<details class="card collapsible-section" open>
    <summary>OpenID Configuration (JSON)</summary>
    <pre class="code-block"><code class="language-json">{{.DiscoveryJSON}}</code></pre>
</details>

<div class="card mt-3">
    <h3>Endpoints Descobertos</h3>
    <ul>
        {{if .Discovery.issuer}}<li><strong>Issuer:</strong> {{.Discovery.issuer}}</li>{{end}}
        {{if .Discovery.authorization_endpoint}}<li><strong>Authorization:</strong> {{.Discovery.authorization_endpoint}}</li>{{end}}
        {{if .Discovery.token_endpoint}}<li><strong>Token:</strong> {{.Discovery.token_endpoint}}</li>{{end}}
        {{if .Discovery.userinfo_endpoint}}<li><strong>UserInfo:</strong> {{.Discovery.userinfo_endpoint}}</li>{{end}}
        {{if .Discovery.jwks_uri}}<li><strong>JWKS:</strong> {{.Discovery.jwks_uri}}</li>{{end}}
        {{if .Discovery.revocation_endpoint}}<li><strong>Revocation:</strong> {{.Discovery.revocation_endpoint}}</li>{{end}}
    </ul>
</div>

{{template "footer" .}}
{{end}}
